function readURL(input) {

    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#preview-pic').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
}

$("#post_p_image").change(function(){
    readURL(this);
    $("#post_p_media").val('');
    $(".media").html('<div class="media" style="display:none;"></div>');
    $('#preview-pic').css('display', 'block');
    $('#preview-pic').css('hidden', 'false');
    $('.preview').css('display', 'inline-block');   
});

$("#clearfile").click(function(event){
	// event.preventDefault();
	$("#post_p_image").val('');
	$("#post_p_media").val('');	
	$(".media").html('<div class="media" style="display:none;"></div>');
	$('#preview-pic').replaceWith('<img id="preview-pic" src="#" alt="your image" hidden="true" />');
	$('.preview').css('display', 'none'); 
});

$("#post_p_media").change(function(){
	$('#post_p_image').val('');
	$('#preview-pic').replaceWith('<img id="preview-pic" src="#" alt="your image" hidden="true" />');
	text = $('#post_p_media').val();
    $('.media').html(text);
    $('.media')
      .simpleFormat()
      .image()
      .youtube({width:240, height:120})
      .link();
    $('.preview').css('display', 'inline-block'); 
    $('.media').css('display', 'block');
});